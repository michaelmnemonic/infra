# Day1
Experiements with a kubernetes based infrastructure

1. Download Talos Linux Iso and boot it:
    X86: https://github.com/siderolabs/talos/releases/download/v1.9.2/metal-amd64.iso
    ARM64: https://github.com/siderolabs/talos/releases/download/v1.9.2/metal-arm64.iso

2. Install talosctl

3. Install kubectl

3. Install docker

4. Create the Cluster

```
talosctl gen secrets -o secrets.yaml
talosctl gen config --with-secrets secrets.yaml <cluster-name> <cluster-endpoint>
```

This generates the following files:
* secrets.yaml - keep them safe
* controlplane.yaml - autogenerated config file for a controlplane, tread as disposable
* worker.yaml - autogenerated config file for a worker, tread as disposable
* talosconfig

5. Setup controlplane as endpoints

```
talosctl --talosconfig=./talosconfig  config endpoint 192.168.122.26
talosctl config merge ./talosconfig
```

6. Edit patch files for customization

...

7. Bring up controlplane

```
talosctl apply-config --insecure -n <ip of controlplane> -p @patch.file --file controlplane.yaml
```

7. Bootstrap kubernetes

```
talosctl bootstrap --nodes <ip of controlplane>
```

# Day 2

Apply machine config

talosctl apply-config --nodes <ip adress> -p <patch file> --file controlplane/worker.yaml 